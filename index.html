<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.7.570/pdf.min.js"></script>
<link rel="stylesheet" href="style.css">


<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">



    <!-- Custom cursor -->
    <div class="cursor-dot" data-cursor-dot id="cursordot"></div>
    <div class="cursor-outline" data-cursor-outline id="cursorout"></div>
    <link rel="stylesheet" type="text/css" href="cursor.css">
    <script src="cursor.js"></script>
</head>


<body>

    <nav class="navbar">
        <div id="nav0">LOGO</div>
        <div id="nav1">ALESSANDRO MAGNOCAVALLO <br> <a href="mailto:ale@magno.me">ale@magno.me</a></div>
        <div id="nav2">STUDENT <br>WEB DESIGNER <br>GRAPHIC DESIGNER</div>
        <div id="nav3">SOCIALS <br>LI IG</div>
        <div id="nav4">MILAN BASED</div>
    </nav>



    <div class="snap-container">
        <!-- First page -->
        <main id="Firstpage">
            <img src="images/logo.svg" id="logo">
        </main>


        <!-- Second page -->
        <main id="Secondpage">
            <p id="aboutme">
                <br>
                <br>
                My name is <ctext>Alessandro Magnocavallo</ctext>. I am currently
                advancing my academic pursuit in Communication Design at Politecnico di Milano.
                With a foundational interest in the realms of <ctext>web</ctext> and <ctext>graphic</ctext> design, my
                academic and project-based
                experiences have been dedicated to the exploration and mastery of visual communication. My approach is
                <ctext>methodical</ctext>, yet <ctext>creative</ctext>, aiming to merge aesthetic appeal with functional
                design to create intuitive
                and engaging digital experiences.
                <br>
                <br>
                <scrolldown style="font-family: -apple-system, BlinkMacSystemFont, sans-serif;
                opacity: 50%;
                font-size: 20px;">Scroll down to see some of my works</scrolldown>
            </p>
        </main>


        <!-- terza pagina // works -->
        <main id="Thirdpage" id="gallerymain">
            <div class="gallery">
                <div class="worksection" onclick="populateModal(projects[0])">
                    <titlegallery>OLIN SKI</titlegallery>
                    <subtitlegallery>Brand Video & Brand Book</subtitlegallery>
                </div>

                <div class="worksection" onclick="populateModal(projects[1])">
                    <titlegallery>Typographic</titlegallery>
                    <subtitlegallery>booklet</subtitlegallery>
                </div>

                <div class="worksection" onclick="populateModal(projects[2])">
                    <titlegallery>GEPPO's WEBSITE</titlegallery>
                    <subtitlegallery>Website</subtitlegallery>
                </div>

                <div class="worksection" onclick="populateModal(projects[3])">
                    <titlegallery>JACK E IL FAGIOLO CLIMATICO</titlegallery>
                    <subtitlegallery>Platform game</subtitlegallery>
                </div>

                <div class="worksection" onclick="populateModal(projects[4])">
                    <titlegallery>Portfolio</titlegallery>
                    <subtitlegallery>Website</subtitlegallery>
                </div>
            </div>
        </main>


    </div>
    <!-- modal test, for descripted work -->

    <div id="myModal" class="modal">
        <div class="imgcontainer">


            <div class="modal-imggallery" id="modal-imggid">
                <img src="" alt="Gallery Image">
                <img src="" alt="">
            </div>


        </div>


        <div class="modal-content">

            <span class="close" onclick="closemodal()">CLOSE</span>
            <titolo id="modal-title">//01</titolo>

            <!-- You can add more content here if needed -->
            <p id="modal-desc">
                <b id="modal-v-title" style="font-family: -apple-system, BlinkMacSystemFont, sans-serif;">Project
                    name</b>
                <br><br>
                <span id="modal-v-desc">Quick little description</span>
                <br><br><br>
                Project Type: <br> <span id="modal-v-ptype"></span>
            </p>
            <p id="modal-info">
                Date made:
                <br>
                <span id="modal-v-date"></span>
                <br><br><br>
                Tools used: <br>
                <span id="modal-v-tools"></span>
            </p>
        </div>
    </div>

</body>


<script>

    window.onload = function () {
        console.log("loaded");
    };



    function closemodal() {
        // var btn = document.getElementById('myModal');
        // btn.style.display = "none";
        document.body.style.overflow = '';


        var modal = document.getElementById('myModal');
        modal.style.animation = 'fadeOutModal 0.2s forwards';
        setTimeout(() => {
            modal.style.display = 'none';
            modal.style.animation = 'fadeInModal 0.2s forwards';
        }, 200);
    }



    // hype shit ykyk
    const projects = [
        {
            number: "//01",
            name: "Olin Ski",
            description: "BrandBook and BrandVideo made for a University Course, Metaprogetto. Based on a old Ski company",
            ptype: "Brandbook & Video",
            tools: "AI ID PS PR AE",
            date: "1st smst 2y // 2023",

            images: [],
            pdf: "./works/01 - Olin/document.pdf",
            video: "https://www.youtube.com/embed/sukNDF-ula4?autoplay=1&controls=0&mute=1",
            bgcolor: "#911011",
        },
        {
            number: "//02",
            name: "limitazione",
            description: "Booklet made for Typographic Design at University, a guidebook to check if a coin is fake",
            ptype: "Booklet",
            tools: "AI PS IN",
            date: "1st smst 2y // 2023",

            images: [],
            pdf: "./works/02 - Typographic/document.pdf",
        },
        {
            number: "//03",
            name: "Geppo's website",
            description: "Website made for a Pizza restaurant in Milan",
            ptype: "Website",
            tools: "vscode",
            date: "2nd smst 1y // 2023",

            images: ['./works/03 - Geppo Website/images/img1.png', './works/03 - Geppo Website/images/img2.png', './works/03 - Geppo Website/images/img3.png'],
            pdf: "",
            bgcolor: "#360b01",
        },
        {
            number: "//04",
            name: "Platform Game",
            description: "Platform game based on a fairy tale, 90% made on JS with the help of Poliphaser",
            ptype: "Videogame",
            tools: "vscode Poliphaser",
            date: "1st smst 2y // 2023",

            images: ['./works/04 - Platform game/images/img1.png', './works/04 - Platform game/images/img2.png', './works/04 - Platform game/images/img3.png'],
            pdf: "",
        },
        {
            number: "//05",
            name: "My Portfolio",
            description: "This website was entirely made by me, hard coded from scratch. It's open-source, meaning you can go check out the code behing it",
            ptype: "Website",
            tools: "vscode",
            date: "March 2024",

            images: [''],
            pdf: "",
        },
    ];



    function populateModal(project) {

        // try {
        //     stylemodal(project);
        // } catch (error) {
        //     console.log("No color selected");
        // };

        document.body.style.overflow = 'hidden';
        var btn = document.getElementById('myModal');
        btn.style.display = "block";
        const number = document.getElementById('modal-title');
        const title = document.getElementById('modal-v-title');
        const desc = document.getElementById('modal-v-desc');
        const ptype = document.getElementById('modal-v-ptype');
        const tools = document.getElementById('modal-v-tools');
        const date = document.getElementById('modal-v-date');
        const imageContainer = document.getElementById('modal-imggid');


        imageContainer.innerHTML = '';
        imageContainer.scrollLeft = 0;
        setTimeout(() => {
            imageContainer.scrollLeft = 0;
        }, 500);


        if (project.video && project.video.trim() !== "") {
            const iframe = document.createElement('iframe');
            iframe.setAttribute('src', project.video);
            iframe.setAttribute('frameborder', '0');
            iframe.setAttribute('allowfullscreen', '');
            iframe.setAttribute('allow', 'autoplay');
            imageContainer.appendChild(iframe);
        }



        number.textContent = project.number;
        title.textContent = project.name;
        desc.textContent = project.description;
        ptype.textContent = project.ptype;
        tools.textContent = project.tools;
        date.textContent = project.date;


        project.images.forEach((imageUrl) => {
            const img = document.createElement('img');
            img.src = imageUrl;

            imageContainer.appendChild(img);
        });
        displayPdfAsImages(project.pdf);
    }


    function stylemodal(project) {
        const modal = document.getElementById('myModal');
        modal.style.backgroundColor = project.bgcolor;
        console.log(project.bgcolor);

        function isColorDark(colorHex) {
            // Convert hex to RGB
            const r = parseInt(colorHex.substr(1, 2), 16);
            const g = parseInt(colorHex.substr(3, 2), 16);
            const b = parseInt(colorHex.substr(5, 2), 16);


            const luminance = 0.299 * r + 0.587 * g + 0.114 * b;


            return luminance < 150 ? true : false;
        }

        if (isColorDark(project.bgcolor)) {
            const root = document.documentElement;
            root.style.setProperty('--black', 'white');
        }
    }




    async function displayPdfAsImages(pdfUrl) {
        const loadingTask = pdfjsLib.getDocument(pdfUrl);
        const pdf = await loadingTask.promise;
        const container = document.getElementById('modal-imggid');

        for (let pageNumber = 1; pageNumber <= pdf.numPages; pageNumber++) {
            const page = await pdf.getPage(pageNumber);


            const canvas = document.createElement('canvas');
            const viewport = page.getViewport({ scale: 1 });
            canvas.height = viewport.height;
            canvas.width = viewport.width;


            const renderContext = {
                canvasContext: canvas.getContext('2d'),
                viewport: viewport
            };
            await page.render(renderContext).promise;


            const img = document.createElement('img');
            img.src = canvas.toDataURL();
            container.appendChild(img);
        }
    }




    const workSectionElements = document.querySelectorAll('.worksection');

    let divhoverx;
    let divhovery;

    workSectionElements.forEach((element) => {
        element.addEventListener('mouseover', () => {
            const rect = element.getBoundingClientRect();
            stuck = true;
            const adjustedLeft = rect.left + rect.width / 2;
            const adjustedTop = window.pageYOffset + rect.top + rect.height / 2;

            cursorDot.style.opacity = '0';

            divhoverx = `${adjustedTop}px`;
            divhovery = `${adjustedLeft}px`;
            // cursorOutline.style.top = `${adjustedTop}px`;
            // cursorOutline.style.left = `${adjustedLeft}px`;
            cursorOutline.style.borderRadius = '0px';
            cursorOutline.style.width = `${rect.width * 2}px`;
            cursorOutline.style.height = `${rect.height}px`;
        });


        element.addEventListener('mouseout', () => {
            stuck = false;  // Allow animations to resume
            // Reset to default styles after animation cancel
            cursorDot.style.opacity = '100';
            cursorOutline.style.width = '25px';
            cursorOutline.style.height = '25px';
            cursorOutline.style.borderRadius = '50%';
            cursorOutline.style.left = '0px'; // Reset position if needed
            cursorOutline.style.top = '0px';
        });

    });





</script>






<!-- Animations, or at least trying to -->
<style>
    /* Additions for modal animations */
    .modal {
        animation: fadeInModal 0.2s forwards;

    }

    @keyframes fadeInModal {
        from {
            opacity: 0;
        }

        to {
            opacity: 1;
        }
    }

    @keyframes fadeOutModal {
        from {
            opacity: 1;
        }

        to {
            opacity: 0;
        }
    }

    .modal img {
        animation: slideIn 0.5s ease-out;
    }




    .gallery img:hover {
        filter: grayscale(0%);
    }
</style>